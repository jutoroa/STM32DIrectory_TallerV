/*
 * PWMxDriver.h
 *
 *  Created on: May 24, 2022
 *      Author: jutoroa
 */

#ifndef PWMXDRIVER_H_
#define PWMXDRIVER_H_


// Definiciones para la configuración
#define TIMER_MODE_UP		0
#define TIMER_MODE_DOWN		1

#define TIMER_INCR_SPEED_1ms	16000
#define TIMER_INCR_SPEED_100us	1600
#define TIMER_INCR_SPEED_10us	160



typedef struct
{
	uint8_t 	pwmMode;			// Selecciona si va Up or Down
	uint16_t 	pwmSpeed;			// Configuración de que tan rapido aumenta
	uint32_t 	pwmPeriod;			// Cada cuanto se genera una  interrupción.
	uint32_t	pwmDuty;			// Porcentaje en el que está activo (Define el ángulo para servo motores)
}TIMER_Config_t;

typedef struct
{
	TIM_TypeDef	*ptrTIMx;			// Estructura con los registros que componen el periférico
	TIMER_Config_t timerConfig;	// Configuración cargada por el usuario
}TIMER_Handler_t;

/* Prototipos de las funciones */ /* Son las las funciones pública */

void PWM_Config(TIMER_Handler_t *prtTimerConfig);

void startTimer(TIMER_Handler_t *ptrTimerConfig);
void stopTimer(TIMER_Handler_t *ptrTimerConfig);




#endif /* PWMXDRIVER_H_ */
